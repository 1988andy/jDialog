/*!
 * jdialog v2.0.0 
 * https://github.com/BndyNet/jDialog#readme 
 * 
 * Copyright (c) 2016 Bndy.Net (http://www.bndy.net), released under the MIT license
 * 
 * Requires: jQuery, layer, alertifyjs[optional] */

"use strict";!function(a){var b;if("undefined"==typeof jQuery)throw new Error("jDialog component requires jQuery");if("undefined"==typeof layer)throw new Error("jDialog component requires layer");return b=function(){return this.VERSION="2.0.0",this.options={title:"jDialog v2",shade:[.2,"#000"],shadeClose:!1,shift:0,maxmin:!0,fix:!0,btn:["OK","Cancel"],closeBtn:1,tips:[1,"#f0ad4e"],tipsTime:3e3,loadingIcon:1,loadingShade:[.6,"#fff"],useAlertify:!0,wait:2,logPosition:"bottom right",closeLogOnClick:!1},this.init()},b.prototype={init:function(){$||console.error("jQuery Required"),this.options.useAlertify&&"undefined"==typeof alertify&&console.error("alertify Required"),"undefined"!=typeof alertify&&(alertify.logPosition(this.options.logPosition),alertify.closeLogOnClick(this.options.closeLogOnClick))},_wrapSize:function(a){return a&&$.isArray(a)?($.isNumeric(a[0])&&(a[0]=a[0]+"px"),$.isNumeric(a[1])&&(a[1]=a[1]+"px")):a=["50%","50%"],a},set:function(a){return this.options=$.extend({},this.options,a),this.init()},alert:function(a,b,c){var d;return d=this,c=$.extend({},d.options,{btn:d.options.btn[0]},c),layer.alert(a,c,b)},success:function(a,b,c){var d;return d=this,c=$.extend({},d.options,{icon:1,btn:d.options.btn[0]},c),d.options.useAlertify?alertify.success(a):layer.alert(a,c.wait,b)},info:function(a,b,c){var d;return d=this,c=$.extend({},d.options,{icon:0,btn:d.options.btn[0]},c),d.options.useAlertify?(console.debug(c),alertify.log(a,c.wait,b)):layer.alert(a,c,b)},error:function(a,b,c){var d;return d=this,c=$.extend({},d.options,{icon:2,btn:d.options.btn[0]},c),d.options.useAlertify?alertify.error(a,c.wait,b):layer.alert(a,c,b)},confirm:function(a,b,c,d){var e;return e=this,d=$.extend({},e.options,{icon:3},d),layer.confirm(a,d,function(a){return b&&b(a),layer.close(a)},function(a){if(c)return c(a)})},prompt:function(a,b,c){var d,e;return e=this,d=$.extend({},e.options,{title:a,formType:c||1}),layer.prompt(d,b)},tip:function(a,b,c){return layer.tips(a,b,$.extend({},this.options,{shade:!1,btn:null,closeBtn:0,time:this.options.tipsTime},c))},show:function(a,b,c){var d,e;return e=this,c&&$.isArray(c)||(c=["50%","50%"]),d=$.extend({},e.options,{type:1,btn:null,area:e._wrapSize(c),content:$(a)}),layer.open(d)},iframe:function(a,b,c){var d,e;return e=this,c&&$.isArray(c)||(c=["50%","50%"]),d=$.extend({},e.options,{type:2,btn:null,area:e._wrapSize(c),content:a}),layer.open(d)},loading:function(a,b){var c,d;d=this,a?(b=$.extend({},{text:"Loading..."},b),c=$('<div class="bn-jdialog-loading"><i class="icon fa fa-spin fa-spinner"></i> <span class="text">'+b.text+"</span></div>"),$(a).each(function(){var a;return $(this).find(".bn-jdialog-loaded").remove(),$(this).find(".bn-jdialog-loading").length>0?$(this).find(".bn-jdialog-loading").show():(a=c.clone(),$(this).height($(this).height()).css("position","relative"),a.width($(this).outerWidth()),a.height($(this).outerHeight()),a.css("padding-top",a.height()/2-10),$(this).append(a))})):(b=$.extend({},d.options,{btn:null,shade:d.options.loadingShade}),layer.load(d.options.loadingIcon,b))},loaded:function(a,b){a?$(a).each(function(){return b?($(this).children(":not(.bn-jdialog-loading)").remove(),$(this).find(".bn-jdialog-loading").removeClass("bn-jdialog-loading").addClass("bn-jdialog-loaded").html(b)):$(this).find(".bn-jdialog-loading").remove()}):layer.closeAll("loading")},close:function(b){var c;c=layer.getFrameIndex(a.name),layer.close(c),parent.layer&&(c=parent.layer.getFrameIndex(a.name),parent.layer.close(c))},closeAll:function(a){layer.closeAll(),parent.layer&&parent.layer.closeAll()}},a.dialog=new b}(window);